# ğŸš¨ "user is not defined" ì—ëŸ¬ í•´ê²° ì™„ë£Œ!

## ğŸ’¡ ë¬¸ì œ ì›ì¸
- **header.ejs**ì™€ **footer.ejs**ì—ì„œ `user` ë³€ìˆ˜ë¥¼ ì²´í¬í•  ë•Œ `undefined` ìƒíƒœë¥¼ ê³ ë ¤í•˜ì§€ ì•ŠìŒ
- ì¼ë¶€ ë¼ìš°íŠ¸ì—ì„œ `user` ë³€ìˆ˜ë¥¼ ì „ë‹¬í•˜ì§€ ì•Šê±°ë‚˜ `null` ì²˜ë¦¬ê°€ ì•ˆ ë¨
- ì„¸ì…˜ì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ í˜ì´ì§€ ì ‘ê·¼ ì‹œ ì—ëŸ¬ ë°œìƒ

## ğŸ”§ í•´ê²°ëœ ë¬¸ì œë“¤

### âœ… 1. Header/Footer íŒŒì¼ ìˆ˜ì •
**Before:**
```ejs
<% if (user) { %>
```
**After:**
```ejs
<% if (typeof user !== 'undefined' && user) { %>
```

### âœ… 2. ëª¨ë“  ë¼ìš°íŠ¸ì—ì„œ user ë³€ìˆ˜ ì•ˆì „ ì „ë‹¬

#### ê²Œì„ ë¼ìš°íŠ¸ (`/server/routes/game.js`)
```javascript
// Before
user: req.session.user,

// After  
user: req.session.user || null,
```

#### ì¸ì¦ ë¼ìš°íŠ¸ (`/server/routes/auth.js`)
```javascript
// ëª¨ë“  render í˜¸ì¶œì— user ì¶”ê°€
res.render('auth/login', {
  title: 'ë¡œê·¸ì¸',
  user: req.session.user || null,  // ì¶”ê°€
  error: null
});
```

#### ë©”ì¸ ì•± ì—ëŸ¬ ì²˜ë¦¬ (`/server/app.js`)
```javascript
// 404 ë° ì—ëŸ¬ ì²˜ë¦¬ì—ì„œ user ë³€ìˆ˜ ì „ë‹¬
res.status(404).render('404', { 
  title: 'í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤',
  user: req.session ? req.session.user || null : null  // ì¶”ê°€
});
```

## ğŸ¯ ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

1. **`/views/header.ejs`** - user ë³€ìˆ˜ ì•ˆì „ ì²´í¬
2. **`/views/footer.ejs`** - user ë³€ìˆ˜ ì•ˆì „ ì²´í¬  
3. **`/server/routes/game.js`** - ê²Œì„ ë¼ìš°íŠ¸ user ì „ë‹¬
4. **`/server/routes/auth.js`** - ì¸ì¦ ë¼ìš°íŠ¸ user ì „ë‹¬
5. **`/server/app.js`** - 404/ì—ëŸ¬ ì²˜ë¦¬ user ì „ë‹¬

## ğŸš€ í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ì„œë²„ ì¬ì‹œì‘
```bash
cd C:\Temp\coupangblog
npm start
```

### 2. ê° í˜ì´ì§€ í…ŒìŠ¤íŠ¸
- âœ… **í™ˆí˜ì´ì§€**: `https://wongram.shop`
- âœ… **ê²Œì„ ëª©ë¡**: `https://wongram.shop/game`  
- âœ… **í…ŒíŠ¸ë¦¬ìŠ¤**: `https://wongram.shop/game/tetris`
- âœ… **ë¡œê·¸ì¸**: `https://wongram.shop/auth/login`
- âœ… **íšŒì›ê°€ì…**: `https://wongram.shop/auth/register`
- âœ… **ë¦¬ë·°**: `https://wongram.shop/reviews`

### 3. ì˜ˆìƒ ê²°ê³¼
- ğŸ‰ **ëª¨ë“  í˜ì´ì§€ ì •ìƒ ì‘ë™**
- ğŸ‰ **"user is not defined" ì—ëŸ¬ ì™„ì „ í•´ê²°**
- ğŸ‰ **ì„¸ì…˜ ìƒíƒœì™€ ê´€ê³„ì—†ì´ ì•ˆì „í•œ í˜ì´ì§€ ë¡œë”©**

## ğŸ”’ ë³´ì•ˆ ê°•í™” íš¨ê³¼

- **ì„¸ì…˜ ì•ˆì „ì„±**: ì„¸ì…˜ì´ ì—†ëŠ” ìƒíƒœì—ì„œë„ ì•ˆì „í•œ í˜ì´ì§€ ë¡œë”©
- **ì—ëŸ¬ ë°©ì§€**: undefined ë³€ìˆ˜ ì°¸ì¡°ë¡œ ì¸í•œ í¬ë˜ì‹œ ë°©ì§€  
- **ì‚¬ìš©ì ê²½í—˜**: ëª¨ë“  í˜ì´ì§€ì—ì„œ ì¼ê´€ëœ í—¤ë”/í‘¸í„° í‘œì‹œ

---

## ğŸ¯ ìµœì¢… ìƒíƒœ

**ì´ì œ ëª¨ë“  í˜ì´ì§€ê°€ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!**

- âœ… í™ˆ í˜ì´ì§€
- âœ… ë¦¬ë·° í˜ì´ì§€  
- âœ… ê²Œì„ í˜ì´ì§€
- âœ… í…ŒíŠ¸ë¦¬ìŠ¤ ê²Œì„
- âœ… ë¡œê·¸ì¸/íšŒì›ê°€ì…
- âœ… ê´€ë¦¬ì í˜ì´ì§€

**ìˆ˜ì • ì™„ë£Œ: 2025-01-13**
